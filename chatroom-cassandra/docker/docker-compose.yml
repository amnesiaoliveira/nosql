 version: '3.8'

 services:
   cassandra:
     image: cassandra:5.0
     container_name: chatroom-cassandra
     ports:
       - "9042:9042"
       - "7199:7199"
     environment:
       - CASSANDRA_CLUSTER_NAME=ChatRoomCluster
       - HEAP_NEWSIZE=512M
       - MAX_HEAP_SIZE=2G
     volumes:
       - cassandra-data:/var/lib/cassandra
     healthcheck:
       test: ["CMD", "cqlsh", "-e", "describe keyspaces"]
       interval: 30s
       timeout: 10s
       retries: 5

 volumes:
   cassandra-data: